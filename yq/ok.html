<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>摇签游戏</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: #f4f4f9;
      margin: 0;
      padding: 0;
      overflow-x: hidden;
    }

    .container {
      max-width: 1000px;
      margin: 20px auto;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 10px;
      margin-top: 20px;
    }

    .grid div {
      padding: 20px;
      background-color: #e0e0e0;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      text-align: center;
      cursor: pointer;
      user-select: none;
      position: relative;
    }

    .grid div span {
      position: absolute;
      bottom: 5px;
      right: 5px;
      font-size: 14px;
      color: #333;
    }

    .grid div.selected {
      background-color: red;
      color: white;
      cursor: not-allowed;
    }

    .grid div.bet {
      background-color: yellow;
    }

    #sign-box {
      margin: 30px auto;
      position: relative;
      display: inline-block;
      width: 120px;
      height: 200px;
    }

    #sign-box img {
      width: 100%;
      height: 100%;
      transform-origin: center top; /* 设置旋转轴 */
    }

    @keyframes shake {
      0%, 100% {
        transform: rotate(0deg);
      }
      25% {
        transform: rotate(-15deg);
      }
      50% {
        transform: rotate(15deg);
      }
      75% {
        transform: rotate(-10deg);
      }
    }

    @keyframes screen-shake {
      0%, 100% {
        transform: translate(0, 0);
      }
      25% {
        transform: translate(-10px, 0);
      }
      75% {
        transform: translate(10px, 0);
      }
    }

    #result {
      font-size: 20px;
      margin-top: 20px;
      color: green;
    }

    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      background-color: #007bff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    button:disabled {
      background-color: #ccc;
      cursor: not-allowed;
    }

    #dealer {
      position: absolute;
      top: 320px;
      left: 55%;
      transform: translateX(-50%);
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 2px solid #000;
      overflow: hidden;
    }

    #dealer img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>林氏宗祠戏台</h1>
    <p>来搭，搭完手不要来！！！！</p>

    <div class="grid" id="grid">
      <div id="cell-0">万金 <span></span></div>
      <div id="cell-1">合海 <span></span></div>
      <div id="cell-2">九官 <span></span></div>
      <div id="cell-3">元吉 <span></span></div>
      <div id="cell-4">垦玉 <span></span></div>
      <div id="cell-5">太平 <span></span></div>
      <div id="cell-6">安士 <span></span></div>
      <div id="cell-7">日山 <span></span></div>
      <div id="cell-8">人生 <span></span></div>
      <div id="cell-9">逢春 <span></span></div>
      <div id="cell-10">拔桂 <span></span></div>
      <div id="cell-11">吉品 <span></span></div>
    </div>

    <div id="sign-box">
      <img src="qiantong2.png" alt="签盒">
    </div>
    
    <button id="shake-button">摇签</button>
    <div id="dealer">
        <img src="jingege.png" alt="庄家">
      </div>
    <div id="result"></div>
  </div>

  <script>
    const grid = document.querySelectorAll('.grid div');
    const shakeButton = document.getElementById('shake-button');
    const resultDiv = document.getElementById('result');
    const signBox = document.getElementById('sign-box').querySelector('img');
    let currentSign = Math.floor(Math.random() * 12);
    let bets = Array(12).fill(0);

    // 初始化：标记初始签子
    markCurrentSign();

    // 点击格子下注
    grid.forEach((cell, index) => {
      cell.addEventListener('click', () => {
        if (cell.classList.contains('selected') || cell.classList.contains('bet')) return;

        if (bets[index] === 0) {
          bets[index] = 1; // 标记为已下注
          const betCount = cell.querySelector('span');
          betCount.textContent = bets[index];
          cell.classList.add('bet');
        } else {
          // 累计下注金额
          bets[index] += 1;
          const betCount = cell.querySelector('span');
          betCount.textContent = bets[index];
        }
      });
    });

    // 点击摇签
    shakeButton.addEventListener('click', () => {
      if (bets.every(bet => bet === 0)) {
        alert('请先下注！');
        return;
      }

      shakeButton.disabled = true;

      // 界面抖动效果
      document.body.style.animation = 'screen-shake 0.5s';
      setTimeout(() => {
        document.body.style.animation = '';
      }, 500);

      // 签盒摇摆动画
      signBox.style.animation = 'shake 3s';

      setTimeout(() => {
        signBox.style.animation = '';
        const previousSign = currentSign;

        // 随机生成新的签子，避免重复
        do {
          currentSign = Math.floor(Math.random() * 12);
        } while (currentSign === previousSign);

        markCurrentSign();

        // 判断是否中奖
        if (bets[currentSign] > 0) {
          resultDiv.textContent = `恭喜中奖！签子是 "${grid[currentSign].textContent.trim()}"，获得 ${bets[currentSign] * 10} 倍奖励！`;
        } else {
          resultDiv.textContent = `很遗憾，签子是 "${grid[currentSign].textContent.trim()}"，未中奖。`;
        }

        // 重置下注状态
        bets.fill(0);
        grid.forEach(cell => {
          cell.classList.remove('bet');
          cell.querySelector('span').textContent = '';
        });

        shakeButton.disabled = false;
      }, 3000);
    });

    // 标记当前签子
    function markCurrentSign() {
      grid.forEach(cell => cell.classList.remove('selected'));
      grid[currentSign].classList.add('selected');
    }
  </script>
</body>
</html>